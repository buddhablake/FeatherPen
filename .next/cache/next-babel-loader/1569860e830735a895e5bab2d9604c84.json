{"ast":null,"code":"import dbConnect from '../../../utils/dbConnect';\nimport Posts from '../../../models/post';\nimport Sessions from '../../../models/session';\ndbConnect();\nexport default (async (req, res) => {\n  const {\n    method,\n    headers: {\n      authorization\n    }\n  } = req;\n\n  switch (method) {\n    case \"GET\":\n      try {\n        const session = await Sessions.findOne({\n          sessionId: authorization\n        });\n        const userPosts = await Posts.find({\n          author: session.userId\n        });\n        res.status(200).json({\n          success: true,\n          userPosts\n        });\n      } catch (error) {\n        res.status(400).json({\n          success: false,\n          error: error.message\n        });\n      }\n\n      break;\n\n    default:\n      res.status(400).json({\n        success: false\n      });\n      break;\n  }\n});","map":{"version":3,"sources":["/Users/blakedouglass/Desktop/projects/Pair_Programming/FeatherPen/pages/api/posts/getUserPosts.js"],"names":["dbConnect","Posts","Sessions","req","res","method","headers","authorization","session","findOne","sessionId","userPosts","find","author","userId","status","json","success","error","message"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,0BAAtB;AACA,OAAOC,KAAP,MAAkB,sBAAlB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AAEAF,SAAS;AAET,gBAAe,OAAOG,GAAP,EAAYC,GAAZ,KAAoB;AAE/B,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,OAAO,EAAE;AACtBC,MAAAA;AADsB;AAAnB,MAEAJ,GAFN;;AAIA,UAAQE,MAAR;AACI,SAAK,KAAL;AACI,UAAI;AACA,cAAMG,OAAO,GAAG,MAAMN,QAAQ,CAACO,OAAT,CAAiB;AACnCC,UAAAA,SAAS,EAAEH;AADwB,SAAjB,CAAtB;AAGA,cAAMI,SAAS,GAAG,MAAMV,KAAK,CAACW,IAAN,CAAW;AAC/BC,UAAAA,MAAM,EAACL,OAAO,CAACM;AADgB,SAAX,CAAxB;AAEAV,QAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAC,IAAV;AAAgBN,UAAAA;AAAhB,SAArB;AACH,OAPD,CAOE,OAAOO,KAAP,EAAc;AACZd,QAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAC,KAAV;AAAiBC,UAAAA,KAAK,EAAEA,KAAK,CAACC;AAA9B,SAArB;AAEH;;AAED;;AACJ;AACIf,MAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,OAAO,EAAG;AAAX,OAArB;AACA;AAjBR;AAmBH,CAzBD","sourcesContent":["import dbConnect from '../../../utils/dbConnect'\nimport Posts from '../../../models/post'\nimport Sessions from '../../../models/session'\n\ndbConnect()\n\nexport default async (req, res) => {\n\n    const { method, headers: {\n       authorization\n    } } = req \n    \n    switch (method) {\n        case \"GET\":\n            try {\n                const session = await Sessions.findOne({\n                    sessionId: authorization })\n                \n                const userPosts = await Posts.find({\n                    author:session.userId })\n                res.status(200).json({ success:true, userPosts })\n            } catch (error) {\n                res.status(400).json({ success:false, error: error.message })\n\n            }\n            \n            break;\n        default:\n            res.status(400).json({success : false })\n            break;\n    }\n}"]},"metadata":{},"sourceType":"module"}