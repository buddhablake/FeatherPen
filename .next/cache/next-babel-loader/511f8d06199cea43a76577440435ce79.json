{"ast":null,"code":"import dbConnect from '../../utils/dbConnect';\nimport Sessions from '../../models/session';\nimport Users from '../../models/user';\nimport axios from 'axios';\ndbConnect();\nexport default (async (req, res) => {\n  const {\n    method,\n    headers: {\n      authorization\n    }\n  } = req;\n\n  switch (method) {\n    case \"GET\":\n      try {\n        const session = await Sessions.findOne({\n          sessionId: authorization\n        });\n\n        if (session.sessionId && session.userId) {\n          res.status(200).json({\n            success: true\n          });\n        } else {\n          res.status(400).json({\n            success: false\n          });\n        }\n      } catch (err) {\n        res.status(400).json({\n          success: false,\n          error: err.message\n        });\n      }\n\n      break;\n\n    case \"DELETE\":\n      try {\n        const session = await Sessions.findOneAndRemove({\n          sessionId: authorization\n        });\n        res.status(200).json({\n          success: true\n        });\n      } catch (err) {\n        res.status(400).json({\n          success: false,\n          error: err.message\n        });\n      }\n\n      break;\n\n    default:\n      res.status(400).json({\n        success: false\n      });\n  }\n});","map":{"version":3,"sources":["/Users/blakedouglass/Desktop/projects/Pair_Programming/FeatherPen/pages/api/session.js"],"names":["dbConnect","Sessions","Users","axios","req","res","method","headers","authorization","session","findOne","sessionId","userId","status","json","success","err","error","message","findOneAndRemove"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,uBAAtB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEAH,SAAS;AAET,gBAAe,OAAOI,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAM;AAAEC,IAAAA,MAAF;AACJC,IAAAA,OAAO,EAAC;AAACC,MAAAA;AAAD;AADJ,MAEFJ,GAFJ;;AAIA,UAAQE,MAAR;AACE,SAAK,KAAL;AACE,UAAI;AACA,cAAMG,OAAO,GAAG,MAAMR,QAAQ,CAACS,OAAT,CAAiB;AAACC,UAAAA,SAAS,EAAEH;AAAZ,SAAjB,CAAtB;;AACA,YAAGC,OAAO,CAACE,SAAR,IAAqBF,OAAO,CAACG,MAAhC,EAAuC;AACrCP,UAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAC;AAAV,WAArB;AACD,SAFD,MAEO;AACLV,UAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAC;AAAV,WAArB;AACD;AACJ,OAPD,CAOE,OAAMC,GAAN,EAAU;AACRX,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAE,KAAX;AAAkBE,UAAAA,KAAK,EAAED,GAAG,CAACE;AAA7B,SAArB;AAEH;;AAED;;AAEF,SAAK,QAAL;AACE,UAAI;AACF,cAAMT,OAAO,GAAG,MAAMR,QAAQ,CAACkB,gBAAT,CAA0B;AAACR,UAAAA,SAAS,EAAEH;AAAZ,SAA1B,CAAtB;AACAH,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC;AAAT,SAArB;AACD,OAHD,CAGE,OAAMC,GAAN,EAAU;AACRX,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAE,KAAX;AAAkBE,UAAAA,KAAK,EAAED,GAAG,CAACE;AAA7B,SAArB;AACH;;AAED;;AACF;AACEb,MAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,OAAO,EAAC;AAAV,OAArB;AA1BJ;AA6BD,CAlCD","sourcesContent":["import dbConnect from '../../utils/dbConnect'\nimport Sessions from '../../models/session'\nimport Users from '../../models/user'\nimport axios from 'axios'\n\ndbConnect()\n\nexport default async (req, res) => {\n  const { method,\n    headers:{authorization}\n  } = req\n\n  switch (method) {\n    case \"GET\":\n      try {\n          const session = await Sessions.findOne({sessionId: authorization})\n          if(session.sessionId && session.userId){\n            res.status(200).json({ success:true })\n          } else {\n            res.status(400).json({ success:false })\n          }\n      } catch(err){\n          res.status(400).json({ success: false, error: err.message})\n\n      }\n\n      break;\n\n    case \"DELETE\":\n      try {\n        const session = await Sessions.findOneAndRemove({sessionId: authorization})\n        res.status(200).json({success:true})\n      } catch(err){\n          res.status(400).json({ success: false, error: err.message})\n      }\n\n      break;\n    default:\n      res.status(400).json({ success:false })\n\n  }\n}\n"]},"metadata":{},"sourceType":"module"}